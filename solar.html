<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="img/galaxy.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <link rel="stylesheet" href="main.css" />
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #video {
        position: fixed;
        left: 0;
        bottom: 0;
      }

      #blocker {
        position: absolute;
        text-align: center;
        width: 100%;
        height: 100%;
        padding-left: 10%;
        background-color: rgba(0, 0, 0, 0.5);
      }

      #secondBlocker {
        position: absolute;
        font-family: 'Comic Sans MS', 'Comic Sans', cursive;
        width: 88%;
        height: 5%;
        margin: 5%;
        margin-top: 0.5%;
        font-size: 2.5vh;
        text-align: center;
        color: #ffffffcc;
        background-color: rgba(0, 0, 0, 0);
        user-select: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        pointer-events: none;
      }
      .loading {
        display: none;
        position: absolute;
        top: 48%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 99;
        color: white;
        font-size: 40px;
        font-weight: 100;
        font-family: Lato, sans-serif;
        letter-spacing: 10px;
        text-transform: uppercase;
        cursor: wait;
      }
      .loading span {
        animation: shrink 2s infinite;
      }

      @keyframes shrink {
        50% {
          transform: scale(0.2);
        }
      }
      #loading_background {
        position: absolute;
        background-color: rgb(0, 0, 0);
        z-index: 98;
        height: 100%;
        width: 100%;
        cursor: wait;
      }

      #touch-controls {
        position: fixed;
        inset: 0;
        z-index: 30;
        display: none;
        pointer-events: none;
      }

      .touch-rocker {
        position: absolute;
        bottom: max(18px, env(safe-area-inset-bottom));
        width: 146px;
        height: 146px;
        border-radius: 50%;
        pointer-events: auto;
        touch-action: none;
        user-select: none;
        -webkit-user-select: none;
      }

      #move-rocker {
        left: max(18px, env(safe-area-inset-left));
      }

      #look-rocker {
        right: max(18px, env(safe-area-inset-right));
      }

      .touch-rocker-base {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 255, 255, 0.2),
          rgba(0, 0, 0, 0.12)
        );
      }

      .touch-rocker-knob {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 66px;
        height: 66px;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: transform 0.09s ease-out;
        border: 1px solid rgba(255, 255, 255, 0.65);
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 255, 255, 0.75),
          rgba(135, 170, 210, 0.6)
        );
        box-shadow:
          0 0 10px rgba(255, 255, 255, 0.25),
          inset 0 0 8px rgba(255, 255, 255, 0.3);
      }

      @media (max-width: 880px) {
        .touch-rocker {
          width: 128px;
          height: 128px;
        }

        .touch-rocker-knob {
          width: 56px;
          height: 56px;
        }
      }
    </style>
    <title>Planetary System</title>
  </head>

  <body>
    <div id="loading_background"></div>
    <div id="loading" class="loading">
      <span style="animation-delay: 0s">L</span
      ><span style="animation-delay: 0.1s">o</span
      ><span style="animation-delay: 0.2s">a</span
      ><span style="animation-delay: 0.3s">d</span
      ><span style="animation-delay: 0.4s">i</span
      ><span style="animation-delay: 0.5s">n</span
      ><span style="animation-delay: 0.6s">g</span
      ><span style="animation-delay: 0.7s">·</span
      ><span style="animation-delay: 0.8s">·</span
      ><span style="animation-delay: 0.9s">·</span>
    </div>
    <div id="container"></div>
    <div id="esc"></div>

    <div id="aiming1">
      <img src="img/aiming4.png" width="21px" height="21px" />
    </div>
    <div id="touch-controls" aria-hidden="true">
      <div id="move-rocker" class="touch-rocker">
        <div class="touch-rocker-base"></div>
        <div id="move-rocker-knob" class="touch-rocker-knob"></div>
      </div>
      <div id="look-rocker" class="touch-rocker">
        <div class="touch-rocker-base"></div>
        <div id="look-rocker-knob" class="touch-rocker-knob"></div>
      </div>
    </div>
    <div id="secondBlocker" style="display: none"></div>
    <div id="blocker">
      <div id="content">
        <h1>Explore the Solar</h1>
        <p id="para">
          Our solar system consists of our star, the Sun, and everything bound
          to it by gravity—the planets Mercury, Venus, Earth, Mars, Jupiter,
          Saturn, Uranus, and Neptune; dwarf planets such as Pluto; dozens of
          moons; and millions of asteroids, comets, and meteoroids.
          <br />Go to the solar system, and explore its secrets!
        </p>
        <a class="btn" onclick="hideMe()">START EXPLORATION</a><br />
        <!--<a class="btn1" onclick="goIsland()">Go Island</a
        >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a
          class="btn1"
          onclick="goAlienBase()"
          >Go Alien Base</a
        >-->
      </div>
    </div>
  </body>
  <script src="./JS/jquery.js"></script>
  <script src="./JS/loading.js"></script>
  <!-- <script src="./JS/stats.min.js"></script> -->
  <script id="vertexShader" type="x-shader/x-vertex">
    uniform sampler2D noiseTexture;
    uniform float noiseScale;

    uniform sampler2D bumpTexture;
    uniform float bumpSpeed;
    uniform float bumpScale;

    uniform float time;
    uniform float bumpRepeat;
    uniform float noiseRepeat;

    varying vec2 vUv;

    void main()
    {
        vUv = uv;

      vec2 uvTimeShift = vUv + vec2( 1.1, 1.9 ) * time * bumpSpeed;
      vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift* vec2(noiseRepeat,noiseRepeat) );
      vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.g );
      // below, using uvTimeShift seems to result in more of a "rippling" effect
      //   while uvNoiseTimeShift seems to result in more of a "shivering" effect
      vec4 bumpData = texture2D( bumpTexture, uvTimeShift* vec2(bumpRepeat,bumpRepeat) );

      // move the position along the normal
      //  but displace the vertices at the poles by the same amount
      float displacement = ( vUv.y > 0.999 || vUv.y < 0.001 ) ?
        bumpScale * (0.3 + 0.02 * sin(time)) :
        bumpScale * bumpData.r;
        vec3 newPosition = position + normal * displacement;

      gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
    }
  </script>
  <script id="fragmentShader" type="x-shader/x-fragment">
    uniform sampler2D baseTexture;
    uniform float baseSpeed;
    uniform float repeatS;
    uniform float repeatT;

    uniform sampler2D noiseTexture;
    uniform float noiseScale;

    uniform sampler2D blendTexture;
    uniform float blendSpeed;
    uniform float blendOffset;

    uniform float time;
    uniform float alpha;

    uniform float noiseRepeat;

    varying vec2 vUv;

    void main()
    {
      vec2 uvTimeShift = vUv + vec2( -0.7, 1.5 ) * time * baseSpeed;
      vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift* vec2(noiseRepeat,noiseRepeat) );
      vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.b );
      vec4 baseColor = texture2D( baseTexture, uvNoiseTimeShift * vec2(repeatS, repeatT) );

      vec2 uvTimeShift2 = vUv + vec2( 1.3, -1.7 ) * time * blendSpeed;
      vec4 noiseGeneratorTimeShift2 = texture2D( noiseTexture, uvTimeShift2* vec2(noiseRepeat,noiseRepeat));
      vec2 uvNoiseTimeShift2 = vUv + noiseScale * vec2( noiseGeneratorTimeShift2.g, noiseGeneratorTimeShift2.b );
      vec4 blendColor = texture2D( blendTexture, uvNoiseTimeShift2 * vec2(repeatS, repeatT) ) - blendOffset * vec4(1.0, 1.0, 1.0, 1.0);

      vec4 theColor = baseColor + blendColor;
      theColor.a = alpha;
      gl_FragColor = theColor;
    }
  </script>
  <script type="module" src="./solar.js"></script>
  <script src="./JS/navigation.js"></script>
</html>
